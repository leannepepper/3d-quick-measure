var e=require("three"),t=require("@react-three/drei"),r=require("@react-three/fiber"),n=require("react"),a=require("three/examples/jsm/postprocessing/EffectComposer"),o=require("three/examples/jsm/postprocessing/OutlinePass"),i=require("three/examples/jsm/postprocessing/RenderPass");function c(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,t}var s=/*#__PURE__*/c(e),l=/*#__PURE__*/c(n);function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(this,arguments)}function m(e){var t=new s.Vector3;return t.x=(e[1].x+e[0].x)/2,t.y=(e[1].y+e[0].y)/2,t.z=(e[1].z+e[0].z)/2,t}function p(e){var t=new s.Box3,r=new s.Group,n=[];return e.forEach(function(e){var t=e.clone();n.push(t)}),r.add.apply(r,n),t.setFromObject(r),t}function d(e){var t=u({},e).multiSelected;if(t.length<2)return null;var r=p(t);/*#__PURE__*/return l.createElement("box3Helper",{box:r,args:[r,new s.Color(16777215)]})}function f(e,t,r,n,a){return e[0].position[a]>t[0].position[a]?[n.max[a],r.max[a]]:e[0].position[a]<t[0].position[a]?[n.min[a],r.min[a]]:[n.max[a],r.max[a]]}function h(e,t,r){var n=e.min[r];return[t.min[r],t.max[r]].reduce(function(e,t){return Math.abs(t-n)<Math.abs(e-n)?t:e})}function x(e,t,r,n){return e[0].position[n]>t[0].position[n]?r.min[n]:e[0].position[n]<t[0].position[n]?r.max[n]:r.min[n]}function v(e){var r=e.hovered,n=e.selected;if(0===n.length||0===r.length)return null;var a=p(n);r[0].geometry.computeBoundingBox();var o=r[0].geometry.boundingBox.clone();o.applyMatrix4(r[0].matrixWorld);var i=f(n,r,a,o,"x"),c=i[0],u=i[1],d=f(n,r,a,o,"y"),v=d[0],g=d[1],E=f(n,r,a,o,"z"),y=E[0],b=E[1],w=[new s.Vector3(c,h(a,o,"y"),o.max.z),new s.Vector3(u,h(a,o,"y"),o.max.z)],z=[new s.Vector3(h(a,o,"x"),v,o.max.z),new s.Vector3(h(a,o,"x"),g,o.max.z)],C=[new s.Vector3(h(a,o,"x"),h(a,o,"y"),y),new s.Vector3(h(a,o,"x"),h(a,o,"y"),b)],O=[new s.Vector3(h(a,o,"x"),m([a.min,a.max]).y,o.max.z),new s.Vector3(x(n,r,a,"x"),m([a.min,a.max]).y,o.max.z)],P=[new s.Vector3(m([a.min,a.max]).x,h(a,o,"y"),o.max.z),new s.Vector3(m([a.min,a.max]).x,x(n,r,a,"y"),o.max.z)];/*#__PURE__*/return l.createElement(l.Fragment,null,/*#__PURE__*/l.createElement(t.Line,{points:w,color:"#41a5f5",lineWidth:1,dashed:!0,dashScale:10,alphaWrite:void 0}),/*#__PURE__*/l.createElement(t.Line,{points:z,color:"#41a5f5",lineWidth:1,dashed:!0,dashScale:10,alphaWrite:void 0}),/*#__PURE__*/l.createElement(t.Line,{points:C,color:"#41a5f5",lineWidth:1,dashed:!0,dashScale:10,alphaWrite:void 0},/*#__PURE__*/l.createElement("group",{position:m(C)},/*#__PURE__*/l.createElement(t.Html,{as:"div",wrapperClass:"measure-text",zIndexRange:[100,0],center:!0,transform:!1,sprite:!0},/*#__PURE__*/l.createElement("p",null,Math.round(Math.abs(C[0].z-C[1].z)))))),/*#__PURE__*/l.createElement(t.Line,{points:O,color:"#f17720",lineWidth:1,alphaWrite:void 0},/*#__PURE__*/l.createElement("group",{position:m(O)},/*#__PURE__*/l.createElement(t.Html,{as:"div",wrapperClass:"measure-text",zIndexRange:[100,0],center:!0,transform:!1,sprite:!0},/*#__PURE__*/l.createElement("p",null,Math.round(Math.abs(O[0].x-O[1].x)))))),/*#__PURE__*/l.createElement(t.Line,{points:P,color:"#f17720",lineWidth:1,alphaWrite:void 0},/*#__PURE__*/l.createElement("group",{position:m(P)},/*#__PURE__*/l.createElement(t.Html,{as:"div",wrapperClass:"measure-text",zIndexRange:[100,0],center:!0,transform:!1,sprite:!0},/*#__PURE__*/l.createElement("p",null,Math.round(Math.abs(P[0].y-P[1].y)))))))}var g=l.createContext(null),E=l.createContext(null);function y(e){var t=e.children,r=n.useContext(g),a=n.useContext(E),o=n.useCallback(function(e){r(function(t){return a.includes(e.object)?[]:[].concat(t,[e.object])})},[a]),i=n.useCallback(function(e){r([])},[]);/*#__PURE__*/return l.createElement("group",{onPointerOver:o,onPointerOut:i},t)}var b=["children"];r.extend({EffectComposer:a.EffectComposer,RenderPass:i.RenderPass,OutlinePass:o.OutlinePass}),exports.QuickMeasure=function(e){var a=e.children;!function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)t.indexOf(r=o[n])>=0||(a[r]=e[r])}(e,b);var o=n.useRef(null),i=r.useThree(),c=i.scene,u=i.gl,m=i.size,p=i.camera,f=n.useMemo(function(){return new s.Vector2(1024,1024)},[]),h=n.useState([]),x=h[0],w=h[1],z=n.useState([]),C=z[0],O=z[1];return n.useEffect(function(){o.current&&o.current.setSize(m.width,m.height)},[m]),r.useFrame(function(){o.current&&o.current.render(),C.length>0&&O(function(e){return[].concat(e)})},1),/*#__PURE__*/l.createElement(g.Provider,{value:w},/*#__PURE__*/l.createElement(E.Provider,{value:C},/*#__PURE__*/l.createElement(t.Select,{box:!0,multiple:!0,onChange:function(e){w([]),O(e)}},/*#__PURE__*/l.createElement(y,null,a)),/*#__PURE__*/l.createElement(d,{multiSelected:C}),/*#__PURE__*/l.createElement(v,{selected:C,hovered:x}),/*#__PURE__*/l.createElement("effectComposer",{ref:o,args:[u]},/*#__PURE__*/l.createElement("renderPass",{attachArray:"passes",scene:c,camera:p}),/*#__PURE__*/l.createElement("outlinePass",{attachArray:"passes",args:[f,c,p],selectedObjects:x,visibleEdgeColor:new s.Color(292026)}),/*#__PURE__*/l.createElement("outlinePass",{attachArray:"passes",args:[f,c,p],selectedObjects:C,visibleEdgeColor:new s.Color(16777215),edgeStrength:10,edgeThickness:.25}))))};
//# sourceMappingURL=index.js.map
