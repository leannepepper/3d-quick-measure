!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("three"),require("@react-three/drei"),require("@react-three/fiber"),require("react"),require("three/examples/jsm/postprocessing/EffectComposer"),require("three/examples/jsm/postprocessing/OutlinePass"),require("three/examples/jsm/postprocessing/RenderPass")):"function"==typeof define&&define.amd?define(["exports","three","@react-three/drei","@react-three/fiber","react","three/examples/jsm/postprocessing/EffectComposer","three/examples/jsm/postprocessing/OutlinePass","three/examples/jsm/postprocessing/RenderPass"],t):t((e||self).reactThreeQuickMeasure={},e.three,e.drei,e.fiber,e.react,e.EffectComposer,e.OutlinePass,e.RenderPass)}(this,function(e,t,r,n,a,o,i,s){function c(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,t}var l=/*#__PURE__*/c(t),u=/*#__PURE__*/c(a);function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m.apply(this,arguments)}var p="#41a5f5",d="#f17720";function f(e){var t=new l.Vector3;return t.x=(e[1].x+e[0].x)/2,t.y=(e[1].y+e[0].y)/2,t.z=(e[1].z+e[0].z)/2,t}function h(e){var t=new l.Box3,r=new l.Group,n=[];return e.forEach(function(e){var t=e.clone();n.push(t)}),r.add.apply(r,n),t.setFromObject(r),t}function x(e){var t=m({},e).multiSelected;if(t.length<2)return null;var r=h(t);/*#__PURE__*/return u.createElement("box3Helper",{box:r,args:[r,new l.Color(16777215)]})}function g(e,t,r,n,a){return e[0].position[a]>t[0].position[a]?[n.max[a],r.max[a]]:e[0].position[a]<t[0].position[a]?[n.min[a],r.min[a]]:[n.max[a],r.max[a]]}function v(e,t,r){var n=e.min[r];return[t.min[r],t.max[r]].reduce(function(e,t){return Math.abs(t-n)<Math.abs(e-n)?t:e})}function E(e,t,r,n){return e[0].position[n]>t[0].position[n]?r.min[n]:e[0].position[n]<t[0].position[n]?r.max[n]:r.min[n]}function b(e){var t=e.hovered,n=e.selected;if(0===n.length||0===t.length)return null;var a=h(n);t[0].geometry.computeBoundingBox();var o=t[0].geometry.boundingBox.clone();o.applyMatrix4(t[0].matrixWorld);var i=g(n,t,a,o,"x"),s=i[0],c=i[1],m=g(n,t,a,o,"y"),x=m[0],b=m[1],y=g(n,t,a,o,"z"),w=y[0],C=y[1],O=[new l.Vector3(s,v(a,o,"y"),o.max.z),new l.Vector3(c,v(a,o,"y"),o.max.z)],P=[new l.Vector3(v(a,o,"x"),x,o.max.z),new l.Vector3(v(a,o,"x"),b,o.max.z)],j=[new l.Vector3(v(a,o,"x"),v(a,o,"y"),w),new l.Vector3(v(a,o,"x"),v(a,o,"y"),C)],z=[new l.Vector3(v(a,o,"x"),f([a.min,a.max]).y,o.max.z),new l.Vector3(E(n,t,a,"x"),f([a.min,a.max]).y,o.max.z)],M=[new l.Vector3(f([a.min,a.max]).x,v(a,o,"y"),o.max.z),new l.Vector3(f([a.min,a.max]).x,E(n,t,a,"y"),o.max.z)];/*#__PURE__*/return u.createElement(u.Fragment,null,/*#__PURE__*/u.createElement(r.Line,{points:O,color:p,lineWidth:1,dashed:!0,dashScale:10,alphaWrite:void 0}),/*#__PURE__*/u.createElement(r.Line,{points:P,color:p,lineWidth:1,dashed:!0,dashScale:10,alphaWrite:void 0}),/*#__PURE__*/u.createElement(r.Line,{points:j,color:p,lineWidth:1,dashed:!0,dashScale:10,alphaWrite:void 0},/*#__PURE__*/u.createElement("group",{position:f(j)},/*#__PURE__*/u.createElement(r.Html,{as:"div",wrapperClass:"measure-text",zIndexRange:[100,0],center:!0,transform:!1,sprite:!0},/*#__PURE__*/u.createElement("p",null,Math.round(Math.abs(j[0].z-j[1].z)))))),/*#__PURE__*/u.createElement(r.Line,{points:z,color:d,lineWidth:1,alphaWrite:void 0},/*#__PURE__*/u.createElement("group",{position:f(z)},/*#__PURE__*/u.createElement(r.Html,{as:"div",wrapperClass:"measure-text",zIndexRange:[100,0],center:!0,transform:!1,sprite:!0},/*#__PURE__*/u.createElement("p",null,Math.round(Math.abs(z[0].x-z[1].x)))))),/*#__PURE__*/u.createElement(r.Line,{points:M,color:d,lineWidth:1,alphaWrite:void 0},/*#__PURE__*/u.createElement("group",{position:f(M)},/*#__PURE__*/u.createElement(r.Html,{as:"div",wrapperClass:"measure-text",zIndexRange:[100,0],center:!0,transform:!1,sprite:!0},/*#__PURE__*/u.createElement("p",null,Math.round(Math.abs(M[0].y-M[1].y)))))))}var y=u.createContext(null),w=u.createContext(null);function C(e){var t=e.children,r=a.useContext(y),n=a.useContext(w),o=a.useCallback(function(e){r(function(t){return n.includes(e.object)?[]:[].concat(t,[e.object])})},[n]),i=a.useCallback(function(e){r([])},[]);/*#__PURE__*/return u.createElement("group",{onPointerOver:o,onPointerOut:i},t)}var O=["children"];n.extend({EffectComposer:o.EffectComposer,RenderPass:s.RenderPass,OutlinePass:i.OutlinePass}),e.QuickMeasure=function(e){var t=e.children;!function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)t.indexOf(r=o[n])>=0||(a[r]=e[r])}(e,O);var o=a.useRef(null),i=n.useThree(),s=i.scene,c=i.gl,m=i.size,p=i.camera,d=a.useMemo(function(){return new l.Vector2(1024,1024)},[]),f=a.useState([]),h=f[0],g=f[1],v=a.useState([]),E=v[0],P=v[1];return a.useEffect(function(){o.current&&o.current.setSize(m.width,m.height)},[m]),n.useFrame(function(){o.current&&o.current.render(),E.length>0&&P(function(e){return[].concat(e)})},1),/*#__PURE__*/u.createElement(y.Provider,{value:g},/*#__PURE__*/u.createElement(w.Provider,{value:E},/*#__PURE__*/u.createElement(r.Select,{box:!0,multiple:!0,onChange:function(e){g([]),P(e)}},/*#__PURE__*/u.createElement(C,null,t)),/*#__PURE__*/u.createElement(x,{multiSelected:E}),/*#__PURE__*/u.createElement(b,{selected:E,hovered:h}),/*#__PURE__*/u.createElement("effectComposer",{ref:o,args:[c]},/*#__PURE__*/u.createElement("renderPass",{attachArray:"passes",scene:s,camera:p}),/*#__PURE__*/u.createElement("outlinePass",{attachArray:"passes",args:[d,s,p],selectedObjects:h,visibleEdgeColor:new l.Color(292026)}),/*#__PURE__*/u.createElement("outlinePass",{attachArray:"passes",args:[d,s,p],selectedObjects:E,visibleEdgeColor:new l.Color(16777215),edgeStrength:10,edgeThickness:.25}))))}});
//# sourceMappingURL=index.umd.js.map
